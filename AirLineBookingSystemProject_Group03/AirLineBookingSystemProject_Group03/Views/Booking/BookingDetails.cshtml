@model AirLineBookingSystemProject_Group03.Models.BookingDetailViewModel

@{
    ViewBag.Title = "Chi tiết Đặt vé: " + Model.MaDatVe;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">

    <div class="row mb-4 border-bottom pb-3">
        <div class="col-md-12">
            <h2 class="text-primary d-inline-block">Chi tiết Đặt vé</h2>
            <span class="badge badge-info ml-3 h4 align-middle">@Model.MaDatVe</span>
        </div>
    </div>

    <div class="row">

        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">✈️ Thông tin Chuyến bay</h5>
                </div>
                <div class="card-body">
                    <p class="h4">
                        @Model.SanBayDi
                        <i class="fa fa-long-arrow-right mx-2 text-secondary"></i>
                        @Model.SanBayDen
                    </p>
                    <hr />
                    <dl class="row mb-0">
                        <dt class="col-sm-5 text-muted">Hãng Hàng không:</dt>
                        <dd class="col-sm-7 font-weight-bold">@Model.HangHangKhong</dd>

                        <dt class="col-sm-5 text-muted">Mã Chuyến bay:</dt>
                        <dd class="col-sm-7">@Model.MaChuyenBay</dd>

                        <dt class="col-sm-5 text-muted">Khởi hành:</dt>
                        <dd class="col-sm-7">@string.Format("{0:HH:mm dd/MM/yyyy}", Model.GioKhoiHanh)</dd>

                        <dt class="col-sm-5 text-muted">Hạ cánh:</dt>
                        <dd class="col-sm-7">@string.Format("{0:HH:mm dd/MM/yyyy}", Model.GioDen)</dd>

                        <dt class="col-sm-5 text-muted">Thời gian bay:</dt>
                        <dd class="col-sm-7">@Model.ThoiGianBay</dd>
                    </dl>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">💰 Thanh toán & Trạng thái</h5>
                </div>
                <div class="card-body">
                    <dl class="row mb-0">
                        <dt class="col-sm-5 text-muted">Ngày Đặt:</dt>
                        <dd class="col-sm-7">@string.Format("{0:dd/MM/yyyy}", Model.NgayDat)</dd>

                        <dt class="col-sm-5 text-muted">Trạng thái:</dt>
                        <dd class="col-sm-7">
                            <span class="badge @(Model.TrangThai == "Đã thanh toán" ? "badge-success" : "badge-warning")">
                                @Model.TrangThai
                            </span>
                        </dd>
                        <hr class="w-100 my-2" />
                        <dt class="col-sm-5 text-muted">Phương thức TT:</dt>
                        <dd class="col-sm-7">@Model.PhuongThucThanhToan</dd>

                        <dt class="col-sm-5 h5 text-dark">Tổng tiền:</dt>
                        <dd class="col-sm-7 h5 text-success font-weight-bold">
                            @string.Format("{0:N0} VNĐ", Model.TongTienThanhToan)
                        </dd>
                    </dl>
                </div>
            </div>
        </div>

    </div>

    <div class="row mt-3">
        <div class="col-md-12">
            <h4 class="mb-3">👤 Danh sách Hành khách (@Model.DanhSachVe.Count)</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-striped shadow-sm">
                    <thead class="thead-light">
                        <tr>
                            <th>Mã Vé</th>
                            <th>Họ tên Hành khách</th>
                            <th>Loại Vé</th>
                            <th>Hạng Vé</th>
                            <th class="text-right">Giá tiền (VNĐ)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var ve in Model.DanhSachVe)
                        {
                            <tr>
                                <td>@ve.MaVe</td>
                                <td>
                                    @ve.HoTenHanhKhach
                                </td>
                                <td>@ve.LoaiVe</td>
                                <td>@ve.HangVe</td>
                                <td class="text-right">@string.Format("{0:N0}", ve.GiaTien)</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="row mt-4 mb-5">
        <div class="col-md-12">
            <a href="@Url.Action("History", "Booking")" class="btn btn-secondary">
                <i class="fa fa-arrow-left"></i> Quay lại Lịch sử giao dịch
            </a>
        </div>
    </div>

</div>